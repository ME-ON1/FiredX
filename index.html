<!DOCTYPE html>

<head>
    <meta charset="utf-8" />
    <title>Will you be fired?</title>
    <meta name="description" content="A simple, opinionated tool for helping decide whether a its your time for layoff or not." />
    <link rel="shortcut icon" href="https://dont.build/favicon.png" />
    <meta property="og:image" content="https://dont.build/thumb.png">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="style.css?v=2" rel="stylesheet" type="text/css" />
</head>
<body>

<div class="container">
    <section class="box">
        <p class="help">1: Low, 10: High</p>
        <h1 class="title">Will you be fired or not?</h1>
        <p>A simple, opinionated tool to help you decide whether it's your time for a layoff or not.</p>
        <br />
        <form class="form">
            <fieldset class="p-performance">
                <span class="value"></span>
                <label>How well has your company performed in the last few quarters? (1 = Not well, 10 = NVIDIA AI boom level)</label>
                <input type="range" min="1" max="10" step="0.5" value="5.5" />
            </fieldset>
            <fieldset class="p-relations">
                <span class="value"></span>
                <label>How good is your relationship with your manager? (1 = Bad; they want you out, 10 = They will fight for you)</label>
                <input type="range" min="1" max="10" step="0.5" value="5.5" />
            </fieldset>
            <fieldset class="p-ratings">
                <span class="value"></span>
                <label>What was your most recent performance rating? (1 = Bad; PIP situation, 10 = Very good; maximum bonus) </label>
                <input type="range" min="1" max="10" step="0.5" value="5.5" />
            </fieldset>
            <fieldset class="p-impact">
                <span class="value"></span>
                <label>Have you made a significant impact on your employer's business outcomes or revenue recently? (1 = Not much, 10 = The company is running because of you) </label>
                <input type="range" min="1" max="10" step="0.5" value="5.5" />
            </fieldset>
            <fieldset class="p-salary">
                <span class="value"></span>
                <label>Do you think your salary is higher than that of your peers in similar roles? (1-5 = You know everyone's salary, No = Not sure) </label>
                <input type="range" min="1" max="10" step="0.5" value="5.5" />
								<div class="p-salary-description"> </div>
            </fieldset>
            </fieldset>
        </form>
        <div class="text-center">
          <button id="btn-toggle-answer">Show answer</button>
        </div>
        <div class="answer hide">
            <h1><span><span class="bool"></span> (<span class="percent"></span>)</span></h1>
            <textarea class="summary" readonly></textarea>
            <textarea hidden class="md-summary" readonly></textarea>
            <button class="copy">Copy</button>
            <button class="copy-md">Copy as Markdown</button>
        </div>
    </section>

    <noscript><h1>This page requires Javascript to function.</h1></noscript>

    <section>
        <p>
            Technical decisions are often about being as less-wrong as possible than being right.
            Decision parameters themselves are dependent on even more parameters, such as the business environment, expertise, team and user culture,
            cost ... There is no one-size-fits all framework for making technical decisions, especially when it comes
            to adding a new feature to a product as they often (rightly) tend to be subjective bets than scientific conclusions.
        </p>
        <p>
            This is one opinionated decision making system (a highly simplified version of it) that tries to bring in
            elements of objectivity to making feature decisions in software products. This system has worked pretty well for me personally
            and at work, <a href="https://zerodha.com">Zerodha</a>. So, it might work for others too. View this page's source for the logic and rationale. 
            Context:
            <a href="https://zerodha.tech/blog/hello-world/">[1]</a>
            <a href="https://zerodha.tech/blog/scaling-with-common-sense/">[2]</a>
            <a href="https://zerodha.tech/blog/being-future-ready-with-common-sense/">[3]</a>
            <a href="https://nadh.in/blog/fomo-yamo/">[4]</a>
        </p>
    </section>
    
    <footer><a href="https://nadh.in">Kailash Nadh</a> &mdash; 2022 / <a href="https://github.com/knadh/dont.build">GitHub</a></footer>
</div>


<script>
(function() {
    const params = [
        { weight: 0.10, value: 5.5, negative: false, name: 'p-users', },
        { weight: 0.20, value: 5.5, negative: false, name: 'p-user-value',},
        { weight: 0.20, value: 5.5, negative: false, name: 'p-feature-value',},
        { weight: 0.15, value: 5.5, negative: true,  name: 'p-effort', },
        { weight: 0.20, value: 5.5, negative: true,  name: 'p-negative-impact',},
        { weight: 0.15, value: 5.5, negative: true,  name: 'p-operational-complexity',},
    ]

    params.forEach((p, n) => {
        let net = 0;
        const inp = document.querySelector(`.${p.name} input`);

        inp.value = p.value;
        inp.oninput = (e) => {
            const val = parseFloat(e.target.value, 64);
            document.querySelector(`.${p.name} .value`).innerText = val;
            p.value = val;

            // Sum all weighted params.
            const sum = params.reduce((prev, pm) => {
                let v = pm.value;
                if (pm.negative) {
                    v = 10 - v;
                }

                return prev + (v / 10 * pm.weight);
            }, 0);

            // Display the results.
            const percent = `${(sum * 100).toFixed(0)}%`

            let b = 'Yes';
            if (sum < 0.5 && sum > 0.46) {
                b = `No, but a close call.`;
            } else if (sum < 0.48) {
                b = `No.`;
            } else if (sum > 0.5 && sum < 0.54) {
                b = `Yes, but a close call.`;
            } else if(sum === 0.5) {
                b = '50-50. Go with the gut.';
            }

            document.querySelector(".answer .percent").innerText = percent;
            document.querySelector(".answer .bool").innerText = b;

            // Print the summary in the textbox.
            let summary = '';
            let mdSummary = '||Question|Answer|\n|---|---|---|\n';
            document.querySelectorAll(".form fieldset").forEach((f, n) => {
                summary += `${n + 1}. ${f.querySelector("label").innerText} = ${f.querySelector("input").value}\n`;
                mdSummary += `|${n + 1}|${f.querySelector("label").innerText}|${f.querySelector("input").value}|\n`;
            });
            summary += `\n=> ${b} (${percent})`;
            mdSummary += `||Result:|${b} (${percent})|`;
            document.querySelector('.summary').value = summary;
            document.querySelector('.md-summary').value = mdSummary;
        };

        inp.dispatchEvent(new Event('input'));
    });
})();

(function () {
    const ans = document.querySelector('.answer');
    const btn = document.querySelector('#btn-toggle-answer');

    btn.addEventListener('click', function() {
        if(ans.style.display === 'block') {
            ans.style.display = 'none';
            btn.innerText = "Show answer";
        } else {
            ans.style.display = 'block';
            btn.innerText = "Hide answer";
        }
    });
})();

(function () {
    const copyBtn = document.querySelector('.copy');
    const copyMdBtn = document.querySelector('.copy-md');

    var copyToClipboard = function(val) {
        var tempTxt=document.createElement("textarea");
        tempTxt.value=val;
        document.body.appendChild(tempTxt);
        tempTxt.select();
        document.execCommand("copy");
        document.body.removeChild(tempTxt);

        let notice = document.createElement("span");
        notice.className = "notice visible";
        notice.innerHTML = "Copied to clipboard.";
        document.body.appendChild(notice);
        setTimeout(() => {
            document.body.removeChild(notice);
        }, 3000);
    }

    copyBtn.addEventListener('click', function() {
        copyToClipboard(document.querySelector('.summary').value);
    });

    copyMdBtn.addEventListener('click', function() {
        copyToClipboard(document.querySelector('.md-summary').value);
    });
})();

</script>

</body>
</html>